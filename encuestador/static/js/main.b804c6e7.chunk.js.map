{"version":3,"sources":["pages/form/enums/InputTypes.js","pages/form/elements/Input.js","pages/form/elements/AItemPicker.js","pages/form/elements/Radio.js","pages/form/elements/Select.js","pages/form/elements/Checkbox.js","pages/form/Field.js","validations.js","pages/form/Form.js","pages/home/HomePage.js","index.js","App.js"],"names":["TEXT","NUMBER","EMAIL","RANGE_SLIDER","WEB_SITE","PHONE","Input","props","defaultValue","config","state","value","getProps","handleChange","bind","event","target","this","setState","onChange","type","InputTypes","min","minValue","max","maxValue","pattern","required","className","React","Component","AItemPicker","items","selected","indexOf","toString","currentTarget","Radio","name","buttons","forEach","item","index","push","key","checked","Select","options","Checkbox","splice","includes","Field","htmlInput","getInput","Object","values","title","htmlFor","numericValue","Infinity","Array","isArray","length","trim","Form","fields","handleSubmit","formId","match","params","fetch","headers","then","res","json","i","catch","console","error","map","isValid","validations","preventDefault","log","validate","field","_id","onSubmit","HomePage","to","render","basename","exact","path","component","document","querySelector"],"mappings":"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","file":"static/js/main.b804c6e7.chunk.js","sourcesContent":["export default {\n  TEXT: 'text',\n  NUMBER: 'number',\n  EMAIL: 'email',\n  RANGE_SLIDER: 'range',\n  WEB_SITE: 'url',\n  PHONE: 'tel'\n}","import React from 'react'\nimport InputTypes from '../enums/InputTypes'\n\nexport class Input extends React.Component {\n  constructor(props) {\n    super(props)\n\n    const { defaultValue } = this.props.config\n\n    this.state = {\n      value: defaultValue || ''\n    }\n\n    this.config = this.getProps()\n\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange(event) {\n    const value = event.target.value\n\n    this.setState({\n      value\n    })\n\n    this.props.onChange(value)\n  }\n\n  getProps() {\n    const { config } = this.props\n    switch(config.type) {\n      case InputTypes.TEXT:\n      case InputTypes.EMAIL:\n      case InputTypes.NUMBER:\n      case InputTypes.WEB_SITE:\n        return {\n          type: config.type || InputTypes.TEXT\n        }\n      case InputTypes.RANGE_SLIDER:\n        return {\n          type: config.type,\n          min: config.minValue,\n          max: config.maxValue\n        }\n      case InputTypes.PHONE:\n        return {\n          type: config.type,\n          pattern: '.'\n        }\n      default:\n        return { }\n    }\n  }\n\n  render() {\n    const { required } = this.props\n    return (\n      <input\n        className=\"form-control\"\n        required={required}\n        value={this.state.value}\n        {...this.config}\n        onChange={this.handleChange}\n      />\n    )\n  }\n}","import React from 'react'\n\nexport class AItemPicker extends React.Component {\n  constructor(props) {\n    super(props)\n  \n    const { items, defaultValue } = props.config\n\n    this.state = {\n      selected: items.indexOf(defaultValue).toString()\n    }\n\n    this.handleChange = this.handleChange.bind(this)\n  }\n  \n  handleChange(event) {\n    const { value } = event.currentTarget\n    this.setState({ selected: value })\n\n    const { items } = this.props.config\n    this.props.onChange(items[value])\n  }\n}","import React from 'react'\nimport { AItemPicker } from './AItemPicker'\n\nexport class Radio extends AItemPicker {\n  render() {\n    const { name, required, config } = this.props\n    const buttons = []\n    config.items.forEach((item, index) => {\n      buttons.push(\n        <div className=\"radio\" key={index}>\n          <label>\n            <input\n              type=\"radio\"\n              name={name}\n              value={index}\n              required={required}\n              onChange={this.handleChange}\n              checked={`${index}` === this.state.selected}\n            />\n            {item}\n          </label>\n        </div>\n      )\n    })\n\n    return buttons\n  }\n}","import React from 'react'\nimport { AItemPicker } from './AItemPicker'\n\nexport class Select extends AItemPicker {\n  render() {\n    const { name, required, config: { items } } = this.props\n    const options = []\n    items.forEach((item, index) => options.push(\n      <option key={index} value={index}>{item}</option>\n    ))\n    return (\n      <select\n        name={name}\n        required={required}\n        className=\"form-control\"\n        value={this.state.selected}\n        onChange={this.handleChange}\n      >{options}</select>\n    )\n  }\n}","import React from 'react'\n\nexport class Checkbox extends React.Component {\n  constructor(props) {\n    super(props)\n  \n    const selected = []\n    const { defaultValue } = props.config\n    if (defaultValue) selected.push(defaultValue)\n\n    this.state = { selected }\n\n    this.handleChange = this.handleChange.bind(this)\n  }\n  \n  handleChange(event) {\n    const { items } = this.props.config\n    const { value, checked } = event.currentTarget\n    const selected = [...this.state.selected]\n\n    if (checked)\n      selected.push(items[value])\n    else\n      selected.splice(selected.indexOf(items[value]), 1)\n\n    this.setState({ selected })\n\n    this.props.onChange(selected)\n  }\n\n  render() {\n    const { name, config } = this.props\n    const buttons = []\n    config.items.forEach((item, index) => {\n      buttons.push(\n        <div className=\"checkbox\" key={index}>\n          <label>\n            <input\n              type=\"checkbox\"\n              name={name}\n              value={index}\n              checked={this.state.selected.includes(item)}\n              onChange={this.handleChange}\n            />\n            {item}\n          </label>\n        </div>\n      )\n    })\n\n    return buttons\n  }\n}","import React from 'react'\nimport { Input } from './elements/Input'\nimport { Radio } from './elements/Radio'\nimport { Select } from './elements/Select'\nimport { Checkbox } from './elements/Checkbox'\n\nimport InputTypes from './enums/InputTypes'\n\nexport class Field extends React.Component {\n  constructor(props) {\n    super(props)\n    this.handleChange = this.handleChange.bind(this)\n    this.htmlInput = this.getInput()\n  }\n\n  handleChange(value) {\n    this.props.onChange(value)\n  }\n\n  getInput() {\n    const { name, required, config } = this.props\n    const { type } = config\n    const props = {\n      name, required, config, onChange: this.handleChange\n    }\n\n    const inputs = Object.values(InputTypes)\n    if (inputs.includes(type)) {\n      return <Input {...props}/>\n    }\n    else if (type === 'radio') {\n      return <Radio {...props}/>\n    }\n    else if (type === 'checkbox') {\n      return <Checkbox {...props}/>\n    }\n    else if(type === 'select') {\n      return <Select {...props}/>\n    }\n  }\n\n  render() {\n    const { name, title } = this.props\n    return (\n      <div className=\"form-group\">\n        <label htmlFor={name}>{title}</label>{this.htmlInput}\n      </div>\n    )\n  }\n}\n","export function numericValue (minValue, maxValue, value) {\n  minValue = minValue || -Infinity\n  maxValue = maxValue || +Infinity\n  return value >= minValue && value <= maxValue\n}\n\nexport function required (value) {\n  if (!Array.isArray(value))\n    return value.trim() !== ''\n  return value.length !== 0\n}\n\nexport default {\n  numericValue,\n  required\n}","import React from 'react'\nimport { Field } from './Field'\nimport InputTypes from './enums/InputTypes'\nimport * as validations from '../../validations'\n\nexport class Form extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      fields: [],\n      values: []\n    }\n    this.handleSubmit = this.handleSubmit.bind(this)\n  }\n\n  componentDidMount() {\n    const { formId } = this.props.match.params\n    fetch(`https://servicio-ucol.herokuapp.com/form/${formId}/fields/`, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => res.json())\n      .then(json => {\n        const values = []\n        for (let i = 0; i < json.length; i++) {\n          values.push({\n            name: json[i].name,\n            value: json[i].config.defaultValue || ''\n          })\n        }\n\n        this.setState({ fields: json, values })\n      })\n      .catch(console.error)\n  }\n\n  handleChange(index, value) {\n    const { fields } = this.state\n    const values = this.state.values.map(value => ({...value}))\n\n    values[index].value = value\n    \n    this.setState({\n      fields, values\n    })\n  }\n\n  validate(value, required, config) {\n    let isValid = true\n\n    if (required) isValid = isValid && validations.required(value)\n\n    switch(config.type) {\n      case InputTypes.NUMBER:\n      case InputTypes.RANGE_SLIDER:\n        isValid = isValid && validations.numericValue(\n          config.minValue,\n          config.maxValue,\n          value\n        )\n        break\n      \n      default: break\n    }\n\n    return isValid\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n    this.state.values.forEach((value, index) => {\n      const { required, config } = this.state.fields[index]\n\n      console.log(config, value.value, this.validate(\n        value.value,\n        required,\n        config\n      ))\n    })\n  }\n\n  render() {\n    const fields = []\n    this.state.fields.forEach((field, index) => fields.push(\n      <Field\n        key={field._id}\n        name={field.name}\n        title={field.title}\n        required={field.required}\n        config={field.config}\n        onChange={value => this.handleChange(index, value)}\n      />\n    ))\n\n    return (\n      <form\n        className=\"col-12 col-md-8\"\n        onSubmit={this.handleSubmit}\n      >\n        {fields}\n        <button type=\"submit\" className=\"btn btn-primary btn-lg btn-block\">\n          Enviar\n        </button>\n      </form>\n    )\n  }\n}","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nexport function HomePage(props) {\n  return (\n    <div className=\"col-12 col-md-8\">\n      <h1>Home Page</h1>\n      <p><Link to=\"/encuestas/1\">Encuesta 1</Link></p>\n    </div>\n  )\n}","import React from 'react'\nimport { render } from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App'\n\nrender(\n  <BrowserRouter\n    basename=\"/qciema/encuestador\"\n  >\n    <App />\n  </BrowserRouter>,\n  document.querySelector('#root'),\n  () => console.log('sss')\n)\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport { Form } from './pages/form/Form'\nimport { HomePage } from './pages/home/HomePage'\n\nexport default function App() {\n  return (\n    <Switch>\n      <Route exact path=\"/\" component={HomePage}/>\n      <Route path=\"/encuestas/:formId\" component={Form}/>\n    </Switch>\n  )\n}"],"sourceRoot":""}